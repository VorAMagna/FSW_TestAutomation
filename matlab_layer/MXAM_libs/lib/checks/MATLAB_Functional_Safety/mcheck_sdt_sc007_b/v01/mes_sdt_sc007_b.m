%% 	Definition TargetLink Function Interface - Outports
%
% [result,cr_items,r_stats] = mes_sdt_sc007_b(system, cmd_s)
%
% OUTPUT:
% =======
% result    - check summary(passed/failed/error messages)
% cr_items  - list of individual results of checked items
% r_stats   - struct with statistic s on the check result
%
% INPUT:
% ======
% system    - model/subsystem to be checked
% cmd_s     - check options, syntax /<key>:<val>,
%
% REFERENCED GUIDELINE:
% =====================
% MES Functional Safety Guidelines
% Release 1.7 (21 June 2013)
% Corresponding Guideline: 2.1
%
% DESCRIPTION:
% ============
% A proper definition of a TargetLink Function Interface requires the
% following properties.
%
% The Inports and Outports on the top level of a TargetLink Function
% Subsystem must be TargetLink ports.
%
% A TargetLink port is considered to be an argument or a return value of a
% function if its "Class" is set to "FCN_ARG", "FCN_REF_ARG" or
% "FCN_RETURN".
%
% If one of these classes is set the data type, scaling and value range of
% the following blocks must be consistent:
%
%     All TargetLink Inports that provide arguments of a TargetLink
%     function with their respective source. All TargetLink Outports that
%     define a return value of a TargetLink function with their respective
%     destination.
%
% Note that in the case of TargetLink Function Outports it is not always
% desirable that its destination block has the same data type, scaling or
% value range. Nevertheless, implicit data type conversion should be
% avoided whenever possible.
%
% If a TargetLink function is configured as scaling invariant, only the
% data type of the ports need to be consistent with their respective
% source, but not the scaling information.
%
% If a TargetLink port is NOT to be considered as an argument or return
% value of a function, the class should still be selected explicitly, i.e.,
% the class 'default' should not be used.
%
% PASS/FAIL CRITERIA:
% ===================
%
% The check inspects TargetLink Outports of each TargetLink function whose class is set to "FCN_ARG", "FCN_REF_ARG" or "FCN_RETURN". The output data type, scaling (LSB and Offset) and value range of each TargetLink Outport is compared with its destination block. TargetLink functions are subsystems which contain a TargetLink Function block.
%
% While determining the data type of the destination block, inheritance is considered as well.
%
%     Failed 1: The Outport is not connected to a destination block.
%     Failed 2: Matching Input port of Stateflow chart (destination block) not found.
%     Failed 3: There is no TargetLink data type set for the Outport or its destination block.
%     Failed 4: The base type of the TargetLink data type of the Outport or its destination block is not defined.
%     Failed 5: The base types of the Outport and its destination block are different.
%     Failed 6: The LSB values of the Outport and its destination block are different.
%     Failed 7: The offsets of the Outport and its destination block are different.
%     Failed 8: The LSB types (power of two vs. arbitrary) of the Outport and its destination block are different.
%     Failed 9: The user-defined value range constraints ("minimum" and/or "maximum") of the Outport and its destination blocks are different. Set the check parameter SDT.sc007_b.IgnoreUndefinedRanges to true to ignore this criterion.
%     Failed 10: The TargetLink function is configured as scaling invariant, but the scaling propagation function is not defined in the scaling propagation field.
%     Review: The data type, scaling or range of the TargetLink Function Outport is different from its destination block, but this deviation may be justified. See Note 3.
%     Warning: The destination block does not support TargetLink data types. Use the check parameter SDT.sc007_b.IgnoreNonTLSources to deactivate this finding.
%
% Note 1: It is recommended to use the Rescaler block whenever data type conversion is necessary. Therefore, the Rescaler block is not considered a failed case.
%
% Note 2: TargetLink blocks whose output data type or scaling is expected to be different from its input are ignored in the analysis. This concerns the following blocks:
% Abs, Sum, Product, Logical and Relational Operator, Look-Up Table (and related ones), Sign, Relay, Discrete Filter, Discrete Transfer Fcn, FIR Filter, Discrete-Time Integrator, Discrete State-Space, Extract Bits, and Preprocessor IF. Additionally, the case when the function Outport is connected to the control port of a Switch or Multiport Switch block is ignored.
%
% Note 3: Some TargetLink blocks such as Saturate, Gain, Fcn, Trigonometry, Math, Sqrt get a review finding, since it might not be reasonable to have the same settings as the TargetLink Function Outport.
%
% SOLUTION:
% =========
% Adjust the diverging signal properties accordingly. Consider using a Rescaler block to make the casting explicitly. Please note that adjusting the data type of a destination block may require further, secondary adjustments involving other blocks. In this case, re-run the check.
%
%     Solution 1: Connect the Outport to a suitable destination block.
%     Solution 2: Adjust the properties of the Stateflow chart.
%     Solution 3: Specify a suitable TargetLink data type for the Outport or its destination.
%     Solution 4: Specify a suitable base type for the Outport or its destination.
%     Solution 5: Match the base types of the Outport and its destination.
%     Solution 6: Match the LSB values of the Outport and its destination.
%     Solution 7: Match the offsets of the Outport and its destination.
%     Solution 8: Match the LSB types of the Outport and its destination.
%     Solution 9: Match the range constraints of the Outport and its destination.
%     Solution 10: Review the implementational specifications of the destination block.
%     Solution (Review): If possible use a Rescaler block to avoid implicit data type conversion.
%
% Add known range limits to the "min" and "max" values of the TargetLink and Stateflow output variables, whenever possible. Do not use the inheritance mechanism for the size and type of Stateflow data if you are working with TargetLink versions < 2.2.
%
% FIX OPERATION:
% ==============
% No automatically fix available.
%
% CHECK PARAMETERS:
% =================
% SDT.sc007_b.IgnoreNonTLSources:
%   DATATYPE:
%       boolean
%   DEFAULT VALUE:
%       false
%   DESCRIPTION:
%       If set to true, Simulink destination blocks that are allowed to be
%       used with TargetLink are not listed in the report. If set to false,
%       the use of these Simulink destination blocks raises a note (see point no. 10 in the check description).
%
% SDT.sc007_b.ValidBaseTypeCombinations:
%   DATATYPE:
%       cellstring
%   DEFAULT VALUE:
%       {'UInt8','Int16'; ...
%        'UInt16','Int32'}
%   DESCRIPTION:
%       Use the following format to specify each allowed pair of base types.
%       {<destination base type 1>, <outport base type 1>;<destination base type 2>, <inport base type 2>; ... }
%       The specification of  {'Int16','UInt8'}  states that if the data type of an Inport is defined with base type
%       UInt8, the data type of its source block should be defined with base type Int16 or UInt8.
%
% SDT.sc007_b.IgnoreUndefinedRanges:
%   DATATYPE:
%       boolean
%   DEFAULT VALUE:
%       false (0)
%   DESCRIPTION:
%       If set to true, only those ranges are checked for consistency that are defined.
%       If set to false, the check considers a pair of ranges to be inconsistent, if at least one range is not defined.
%
% NOTE:
% =====
% - User-defined ranges of boolean and constant sources are not checked.
% - Consistency between TL-outports and their destination blocks is not
%   checked, because the destination block might need to change the data
%   type.
% - This check requires a full featured TL Version.
%
% PUBLISHING INFORMATION
% *************************************************************************
% Copyright:    Model Engineering Solutions
% Date:         $Date: 2020/07/31 16:03:12CEST $
% Revision:     $Rev: 7355 $
% *************************************************************************

function [result,cr_items,r_stats] = mes_sdt_sc007_b(system,cmd_s)










































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































