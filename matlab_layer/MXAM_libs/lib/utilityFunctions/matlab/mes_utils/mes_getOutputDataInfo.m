% Gets the infos of output variable of all blocks (include SL block, TL
% block and stateflow chart)
%
% SYNTAX:
% =======
%[r_di,s_err]=mes_getOutputDataInfo(h,i_outportNo,r_ops)
%
% DESCRIPTION:
% ============
% Gets data type, scaling, data range, for TL block and stateflow chart
% also variable class and allowed range of the output <i_outportNo> of
% hBlock.
% If TargetLink is installed, and the block h is a TL block or a stateflow
% chart, the info of these block will be obtained by function
% mes_getOutputDataInfOfTLblock; if the block is a SL block or no
% TargetLink is installed, the function will try to compile the model and
% get the compiled data info the the block.
% For stateflow chart, if it is in TL subsystem, then in case that no TL
% data info is found, the data type is Float64; if it is not in TL
% subsystem, the SL setting is returned.
%
% INPUT ARGUMENTS:
% ================
% -  h              (double) (no default value)
%                    Handle of the block whose output variable info will be retrieved.
% -  i_outportNo     (integer, default=1) outport number of the block,
%                    whose data info will be retrived
% -  r_ops           options, has following fields
%    .signalname     (string) If the block is tl bus port, this argument is used to
%                    identify which signal will be retrieved
%                    NOTE: This parameter is also used in subsequent
%                    calls to mes_findSrcBlock!
%    .li_muxvecind   if the signal is a vector, this is the index of
%                    signals to be retrieved. E.g[2 3 4]
%    .checkedBlocks   vector of block handles, for internal use only
%                    to stop recursive search in case of a signal loop.
%    .modelname      string, name of the model, if empty, will be obtained by bdroot(h)
%    .b_trycompile   if true and the block is a SL block, then try to
%                    compile the model
%    .b_resetcompile if true, set the model back to non compiled mode.
%    .b_UseDataRangeForMissingUserRange, default=false, if true,
%                    the undefined use range (min max) will be set to the range of data type.
%                    for tl relational operator and logical operator, this
%                    variable is always true.
% - b_resetCompileFlag: if true, reset the model compilable flag to
%               unknown, this is used internally.
% RETURN VALUES:
% ==============
% - r_di            struct of the output data type
%    .actSource     the act source block from which the dInfo is
%                   obtained, it is useful if property of block is
%                   inherited.
%    .actPort       outport number of the actual source (1 based)
%    .datatype      data type of the output variable of the retrieved block
%    .basetype      base data type of the output variable of the retrieved block
%    .range         range of the data type
%    .allowedrange  min and max of the block (for TL SF blocks only)
%    .lsb           lsb of the output variable
%    .offset        offset of the output variable
%    .class         output vatiable class (for TL SF blocks only)
%    .errmsg
%    .isbus         if the block is TL bus port, and no signal name is
%                   given, then this is true
%    .busdata       if isbus is true, this has the info of all the bus
%                   signals (for TL SF blocks only)
%    .isvector      if the signal is not a bus but a vector (length(lsb)>1)
%    .isScalingInvariant if Outport of chart or outport block of a
%                   TL_function subsystem is configured to be scaling
%                   invariant, this will be true. In this case, the scaling
%                   info in this return struct is not correct, they are
%                   depended on the inports in the same chart or same
%                   TL_function subsystem.
%    .busdata(i).actSource same as above
%    .busdata(i).datatype data type of every bus signal
%    .busdata(i).basetype base data type of every bus signal
%    .busdata(i).range
%    .busdata(i).allowedrange
%    .busdata(i).lsb
%    .busdata(i).offset
%    .busdata(i).class
%    .busdata(i).isbus
%    .busdata(i).errmsg error message for this signal
%
%    .isTLBlock      if the block is a TL block or stateflow chart, this variable is true
%    .s_tlerr        internal info
%    .compilestatus  {'unchanged', 'comp_err','term','term_err','comp'},
%                    status of the model after calling of this function
% - s_err            error message
% ****************************************************************
% Copyright:  Model Engineering Solutions
% ****************************************************************

function [r_di,s_err,checkedBlocks]=mes_getOutputDataInfo(h_block,i_outportNo,r_ops,b_resetCompileFlag)











































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































